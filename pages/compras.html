<!-- /pages/compras.html -->
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Chelina Hub ‚Ä¢ Compras</title>

  <!-- CSS base del Hub -->
  <link rel="stylesheet" href="../assets/css/base.css">
  <link rel="stylesheet" href="../assets/css/aurora.css">
  <link rel="stylesheet" href="../assets/css/cards.css">
  <link rel="stylesheet" href="../assets/css/theme.css">
  <link rel="stylesheet" href="../assets/css/hub.css">

  <meta name="color-scheme" content="dark">

  <!-- FIXES QUIR√öRGICOS (no pisan el HUB, solo corrigen logo + hover) -->
  <style>
    /* 1) LOGO: nunca m√°s Godzilla */
    .hub-logo{
      width: 44px;
      height: 44px;
      border-radius: 14px;
      overflow: hidden;
      display: grid;
      place-items: center;
      flex: 0 0 44px;
      background: rgba(255,255,255,.04);
      border: 1px solid rgba(255,255,255,.10);
    }
    .hub-logo img{
      width: 78%;
      height: 78%;
      object-fit: contain;
      display: block;
    }

    /* 2) ESPACIADO: si algo ‚Äúse pega‚Äù, aqu√≠ lo blindamos */
    .hub-shell{
      padding-top: 18px;
      padding-left: 18px;
      padding-right: 18px;
    }

    /* 3) HOVER: menos blanco, m√°s premium */
    .row-card:hover,
    .split-link:hover,
    .search-row:hover,
    .btn:hover{
      background: rgba(255,255,255,.06) !important;
      border-color: rgba(255,255,255,.14) !important;
      transform: translateY(-1px);
    }

    /* 4) Bot√≥n soft: evita ‚Äúflash‚Äù blanco */
    .btn-soft:hover{
      background: rgba(255,255,255,.08) !important;
    }

    /* 5) Inputs m√°s sobrios */
    .input:focus{
      outline: none;
      border-color: rgba(255,255,255,.18);
      box-shadow: 0 0 0 3px rgba(255,255,255,.06);
    }
  </style>
</head>

<body class="hub">
  <!-- Fondo aurora / textura -->
  <div class="bg-aurora" aria-hidden="true"></div>

  <main class="hub-shell">

    <!-- Topbar -->
    <header class="hub-topbar">
      <div class="hub-brand">
        <div class="hub-logo" aria-hidden="true">
          <img src="../assets/img/logo.png" alt="Chelina Shop" />
        </div>
        <div class="hub-brand-txt">
          <div class="hub-title">Compras</div>
          <div class="hub-subtitle">Registro, seguimiento y an√°lisis del flujo comercial Chelina</div>
        </div>
      </div>

      <div class="hub-actions">
        <a class="btn btn-ghost" href="../index.html" title="Volver al Panel Central">‚Üê Volver</a>
        <a class="btn btn-primary" href="#registrar" title="Registrar compra">Ôºã Registrar compra</a>
      </div>
    </header>

    <!-- HERO: Mini Google Compras -->
    <section class="card card-hero">
      <div class="hero-grid">
        <div class="hero-main">
          <h1 class="hero-h1">Mini Google ‚Ä¢ Compras</h1>
          <p class="hero-p">
            Busca por <strong>ID de compra</strong>, <strong>cliente</strong> o <strong>producto</strong>.
            <span class="muted">(Hoy: demo visual. Luego: search-index.json)</span>
          </p>

          <div class="hero-search">
            <input id="searchInput" class="input" type="search" placeholder="Ej: CH-0049 / Petronila / Mary Jane‚Ä¶" autocomplete="off" />
            <button id="searchBtn" class="btn btn-soft" type="button">Buscar</button>
          </div>

          <div class="hero-tip muted">
            Tip: en la demo mostramos resultados simulados; despu√©s se conecta al √≠ndice JSON.
          </div>

          <!-- Resultados demo -->
          <div id="searchResults" class="search-results" aria-live="polite"></div>
        </div>

        <aside class="hero-side">
          <div class="mini-card">
            <div class="mini-card-title">Objetivo del panel</div>
            <div class="mini-card-text">
              Ver el pulso operativo: recientes, an√°lisis r√°pido, exploraci√≥n por cronolog√≠a y acciones.
            </div>
          </div>

          <div class="mini-card">
            <div class="mini-card-title">Estado del embudo (contexto)</div>
            <div class="mini-card-text muted">
              Aqu√≠ luego podemos mostrar totales ‚Äúen caliente‚Äù (Nuevos/Conversi√≥n/Fidelizados/Inactivos).
            </div>
          </div>
        </aside>
      </div>
    </section>

    <!-- SNAPSHOT: KPIs -->
    <section class="card">
      <div class="section-head">
        <div>
          <h2 class="section-title">Estado r√°pido de compras</h2>
          <div class="section-subtitle">KPIs demo (luego alimentados por dashboard.json / Registro Compra)</div>
        </div>
        <div class="section-meta muted">
          √öltima actualizaci√≥n: <span id="lastUpdate">‚Äî</span>
        </div>
      </div>

      <div class="kpi-grid">
        <div class="kpi-card">
          <div class="kpi-label">üõí Compras esta semana</div>
          <div class="kpi-value">‚Äî</div>
        </div>
        <div class="kpi-card">
          <div class="kpi-label">üí∞ Monto total</div>
          <div class="kpi-value">‚Äî</div>
        </div>
        <div class="kpi-card">
          <div class="kpi-label">üåç Pa√≠s l√≠der</div>
          <div class="kpi-value">‚Äî</div>
        </div>
        <div class="kpi-card">
          <div class="kpi-label">‚ö° Pago dominante</div>
          <div class="kpi-value">‚Äî</div>
        </div>
      </div>
    </section>

    <!-- BLOQUE PRINCIPAL -->
    <section class="grid-2">
      <!-- Izquierda: compras recientes -->
      <section class="card">
        <div class="section-head">
          <div>
            <h2 class="section-title">Compras recientes</h2>
            <div class="section-subtitle">Replica tu vista ‚Äú√∫ltimos 7 d√≠as‚Äù. (Hoy: demo visual)</div>
          </div>
          <span class="pill">Recientes</span>
        </div>

        <div class="list-cards" id="recentPurchases">
          <!-- Items demo -->
          <article class="row-card" data-id="CH-0049" data-cliente="Petronila G√≥mez" data-producto="Tenis Bomb">
            <div class="row-main">
              <div class="row-title">CH-0049 ¬∑ Petronila G√≥mez</div>
              <div class="row-meta muted">Producto: Tenis Bomb ¬∑ Monto: $25</div>
            </div>
            <div class="row-side">
              <span class="badge badge-pay">Binance</span>
              <div class="row-date muted">04 May 2025</div>
            </div>
          </article>

          <article class="row-card" data-id="CH-0048" data-cliente="Mar√≠a F. R." data-producto="Mary Jane Reptil">
            <div class="row-main">
              <div class="row-title">CH-0048 ¬∑ Mar√≠a F. R.</div>
              <div class="row-meta muted">Producto: Mary Jane Reptil ¬∑ Monto: $40</div>
            </div>
            <div class="row-side">
              <span class="badge badge-pay">Zelle</span>
              <div class="row-date muted">03 May 2025</div>
            </div>
          </article>

          <article class="row-card" data-id="CH-0047" data-cliente="Andrea P." data-producto="Mocas√≠n Boutique">
            <div class="row-main">
              <div class="row-title">CH-0047 ¬∑ Andrea P.</div>
              <div class="row-meta muted">Producto: Mocas√≠n Boutique ¬∑ Monto: $35</div>
            </div>
            <div class="row-side">
              <span class="badge badge-pay">Pago M√≥vil</span>
              <div class="row-date muted">29 Abr 2025</div>
            </div>
          </article>
        </div>

        <div class="section-footer">
          <div class="muted">Click ‚Üí detalle (futuro). Hoy: demo / placeholder.</div>
          <button class="btn btn-soft" id="verMasBtn" type="button">Ver m√°s</button>
        </div>
      </section>

      <!-- Derecha: cronolog√≠a + comparativas -->
      <aside class="stack">
        <section class="card">
          <div class="section-head">
            <div>
              <h2 class="section-title">Explorar por per√≠odo</h2>
              <div class="section-subtitle">Tu cronolog√≠a de carpetas traducida a UI</div>
            </div>
            <span class="pill">Cronolog√≠a</span>
          </div>

          <div class="split-box">
            <div class="split">
              <div class="split-title">üìÜ Por mes</div>
              <a class="split-link" href="#" data-toast="Abril 2025 (demo)">Abril 2025</a>
              <a class="split-link" href="#" data-toast="Marzo 2025 (demo)">Marzo 2025</a>
              <a class="split-link" href="#" data-toast="Febrero 2025 (demo)">Febrero 2025</a>
            </div>

            <div class="split">
              <div class="split-title">üì¶ Por semana</div>
              <a class="split-link" href="#" data-toast="Semana 18 ¬∑ 2025 (demo)">Semana 18 ¬∑ 2025</a>
              <a class="split-link" href="#" data-toast="Semana 17 ¬∑ 2025 (demo)">Semana 17 ¬∑ 2025</a>
              <a class="split-link" href="#" data-toast="Semana 16 ¬∑ 2025 (demo)">Semana 16 ¬∑ 2025</a>
            </div>
          </div>
        </section>

        <section class="card">
          <div class="section-head">
            <div>
              <h2 class="section-title">Resumen comparativo (7 d√≠as)</h2>
              <div class="section-subtitle">Mini panel por pa√≠s / pago (luego data real)</div>
            </div>
            <span class="pill">Insights</span>
          </div>

          <div class="mini-table">
            <div class="mini-row">
              <div class="mini-left">üáªüá™ Venezuela</div>
              <div class="mini-right muted">‚Äî compras</div>
            </div>
            <div class="mini-row">
              <div class="mini-left">üá®üá¥ Colombia</div>
              <div class="mini-right muted">‚Äî compras</div>
            </div>
            <div class="mini-row">
              <div class="mini-left">‚ö° M√©todo top</div>
              <div class="mini-right muted">‚Äî</div>
            </div>
          </div>

          <div class="muted" style="margin-top:10px">
            Nota: el ‚Äúcomparativo por pa√≠s‚Äù vive perfecto aqu√≠; los rankings m√°s pesados van en Reportes.
          </div>
        </section>
      </aside>
    </section>

    <!-- BLOQUE INFERIOR -->
    <section class="grid-2">
      <section class="card" id="registrar">
        <div class="section-head">
          <div>
            <h2 class="section-title">Acciones</h2>
            <div class="section-subtitle">Operaci√≥n r√°pida</div>
          </div>
          <span class="pill">Operaci√≥n</span>
        </div>

        <div class="actions-grid">
          <a class="btn btn-primary" href="#" data-toast="Registrar nueva compra (demo)">Ôºã Registrar nueva compra</a>
          <a class="btn btn-soft" href="#" data-toast="Exportar compras (futuro)">üì§ Exportar compras (futuro)</a>
          <a class="btn btn-soft" href="./reportes.html" title="Ir a reportes">üìä Ver reportes detallados</a>
        </div>

        <div class="muted" style="margin-top:10px">
          Exportaci√≥n y reportes se conectar√°n a Drive/Sheets sin duplicar archivos.
        </div>
      </section>

      <section class="card">
        <div class="section-head">
          <div>
            <h2 class="section-title">Tips de uso</h2>
            <div class="section-subtitle">Soporte operativo</div>
          </div>
          <span class="pill">Soporte</span>
        </div>

        <ul class="tips">
          <li>Revisa siempre <strong>m√©todo de pago</strong> y <strong>monto</strong> antes de cerrar semana.</li>
          <li>Usa ‚ÄúExplorar por semana‚Äù para evitar duplicados y mantener el criterio del CRM.</li>
          <li>Si una compra requiere gesti√≥n extra, m√°rcala como ‚ÄúPor enviar‚Äù (fase futura).</li>
        </ul>

        <div class="muted">
          Reduce fricci√≥n para el equipo y mantiene el criterio operativo claro.
        </div>
      </section>
    </section>

    <footer class="hub-footer muted">
      Chelina Hub Web ¬∑ Compras ‚Äî Demo visual estilo Freepik (listas ligeras + cards)
    </footer>
  </main>

  <!-- Toast simple -->
  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script>
    // ===== Utilidades UI =====
    const toastEl = document.getElementById('toast');
    function toast(msg) {
      toastEl.textContent = msg;
      toastEl.classList.add('show');
      clearTimeout(window.__toastTimer);
      window.__toastTimer = setTimeout(() => toastEl.classList.remove('show'), 2200);
    }

    // Links demo con toast
    document.querySelectorAll('[data-toast]').forEach(el => {
      el.addEventListener('click', (e) => {
        e.preventDefault();
        toast(el.getAttribute('data-toast'));
      });
    });

    // ===== Mini Google (demo) =====
    const input = document.getElementById('searchInput');
    const btn = document.getElementById('searchBtn');
    const results = document.getElementById('searchResults');

    function runSearch() {
      const q = (input.value || '').trim().toLowerCase();
      results.innerHTML = '';
      if (!q) { toast('Escribe algo para buscar.'); return; }

      const cards = Array.from(document.querySelectorAll('#recentPurchases .row-card'));
      const hits = cards.filter(c => {
        const id = (c.dataset.id || '').toLowerCase();
        const cli = (c.dataset.cliente || '').toLowerCase();
        const pro = (c.dataset.producto || '').toLowerCase();
        return id.includes(q) || cli.includes(q) || pro.includes(q);
      });

      const wrap = document.createElement('div');
      wrap.className = 'search-wrap';

      const title = document.createElement('div');
      title.className = 'search-title';
      title.textContent = `Resultados (demo): ${hits.length}`;
      wrap.appendChild(title);

      if (!hits.length) {
        const empty = document.createElement('div');
        empty.className = 'search-empty muted';
        empty.textContent = 'Sin resultados en la demo. (Luego se conecta a search-index.json)';
        wrap.appendChild(empty);
      } else {
        hits.slice(0, 6).forEach(h => {
          const row = document.createElement('button');
          row.className = 'search-row';
          row.type = 'button';
          row.innerHTML = `
            <span class="search-id">${h.dataset.id}</span>
            <span class="search-txt muted">${h.dataset.cliente} ¬∑ ${h.dataset.producto}</span>
          `;
          row.addEventListener('click', () => toast(\`Abrir compra \${h.dataset.id} (placeholder)\`));
          wrap.appendChild(row);
        });
      }

      results.appendChild(wrap);
    }

    btn.addEventListener('click', runSearch);
    input.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') runSearch();
    });

    document.getElementById('verMasBtn').addEventListener('click', () => {
      toast('Cargar m√°s compras (demo). Luego: paginaci√≥n desde JSON/Sheet.');
    });

    document.getElementById('lastUpdate').textContent = '‚Äî';
  </script>
</body>
</html>
